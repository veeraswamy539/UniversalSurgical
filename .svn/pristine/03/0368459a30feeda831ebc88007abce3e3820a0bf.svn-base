@using PagedList;
@using PagedList.Mvc;
@model PagedList.IPagedList<Universal.BusinessEntities.EmployeeAssets>
@Scripts.Render("~/bundles/jqueryval")

<div class="col-lg-12 search-strip">
    @if (Session["AccountMgr"] != null)
    {
        <div class="col-lg-8 col-md-8">
                <div class="col-lg-8 col-md-8 search-fld no-padding">
                    @Html.TextBox("SearchString", ViewBag.CurrentFilter as string, new { @placeholder = "Enter Employee ID", @required = "required", @class = "form-control ", @maxlength = "50", @Title = "Employee ID" })</div>
                <div class="col-lg-4 col-md-4  ">
                    <a href="#" id="searchBtn" class="col-lg-12 col-md-12 frm-src-fld  "><i class="fa fa-search">
                    </i> Search</a>
                </div>
        </div>
        <div class="col-lg-3 col-md-3">
            <a href="@Url.Action("AssetAssigned", "Shared", new {flag=1 })" class="md-trigger update frm-src-fld" data-modal="modal-16">
            <i class="fa fa-user-plus"></i> Create Assets Assigned</a>
        </div>
    }
</div>

<div class="content-cont col-lg-12 col-md-12 no-padding" id="testemp1"  >
    <div class=" container-fluid emp-exd-frm margin-20 p-b-20">
    @if (Session["AccountMgr"] != null)
    {
        <div class="grid-hd col-lg-12 col-md-12 col-sm-12">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 grid-headding">
               <i class="fa fa-suitcase"></i> Employees Assets Assigned
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right">
                <div class="col-md-4 emp-exp-dt pull-right text-right">
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
    }
    else if (Session["Employee"] != null)
    {
        <div class="grid-hd col-lg-12 col-md-12 col-sm-12" >
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 grid-headding">
               <i class="fa fa-suitcase"></i> Employee Assets
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right">
                <div class="col-md-4 emp-exp-dt pull-right text-right">
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
    }
    <div class="clearfix"></div>
    <div class="table-responsive">
    @if (Model.Count != 0)
    {
        <table class="table no-more-tables col-lg-12 table-color fixed">
            <thead>
                <tr class="grid-headding-strips">
                    <th class="v-align-middle text-center">    Emp ID </th>
                    <th class="v-align-middle text-center">    Laptop </th>
                    <th class="v-align-middle text-center">    Laptop-Bag </th>
                    <th class="v-align-middle text-center">    Simcard </th>
                    <th class="v-align-middle text-center">    Cellphone </th>
                    <th class="v-align-middle text-center">    Datacard </th>
                    <th class="v-align-middle text-center">    Multimeter </th>
                    <th class="v-align-middle text-center">    Toolkit </th>
                    @if (Session["AccountMgr"] != null)
                    {
                    <th class="v-align-middle text-center">    UPDATE </th>
                    @*<th>    DELETE </th>*@
                    }
                    <th></th>
                </tr>
            </thead>
            <tbody>
            @foreach (var item in Model)
            {
                <tr>

                    <td class="v-align-middle text-center">@item.Employee_ID
                    @if (item.Laptop == true || item.LaptopBag == true || item.Cellphone == true || item.Datacard == true || item.Multimeter == true || item.Simcard == true || item.Toolkit == true)
                    {
                        <br />
                        <b>Details:</b>    
                    }
                    </td>
                    @if (@item.Laptop == true)
                    {
                        <td class="v-align-middle text-center" >Yes<br />
                        @if (item.LaptopNo != null && item.LaptopNo.Length > 0)
                        {
                            @item.LaptopNo
                        }
                        else
                        {
                            @:- - -
                        }
                        </td>
                    }
                    else
                    {
                        <td class="v-align-middle text-center">No</td>
                    }
                    
                    @if (@item.LaptopBag == true)
                    {
                        <td class="v-align-middle text-center">Yes <br />
                        @if (item.LaptopBagName != null && item.LaptopBagName.Length > 0)
                        {
                            @item.LaptopBagName
                        }
                        else
                        {
                             @:- - -
                        }
                        </td>
                    }
                    else
                    {
                        <td class="v-align-middle text-center">No</td>
                    }

                    @if (@item.Simcard == true)
                    {
                        <td class="v-align-middle text-center">Yes <br />
                        @if (item.SimcardNo != null && item.SimcardNo.Length > 0)
                        {
                            @item.SimcardNo
                        }
                        else
                        {
                            @:- - -
                        }
                        </td>
                    }
                    else
                    {
                        <td class="v-align-middle text-center">No</td>
                    }

                    @if (@item.Cellphone == true)
                    {
                        <td class="v-align-middle text-center">Yes <br />
                        @if (item.CellphoneNo != null && item.CellphoneNo.Length > 0)
                        {
                            @item.CellphoneNo
                        }
                        else
                        {
                            @:- - -
                        }
                        </td>
                    }
                    else
                    {
                        <td class="v-align-middle text-center">No</td>
                    }
                    
                    @if (@item.Datacard == true)
                    {
                        <td class="v-align-middle text-center">Yes <br />
                        @if (item.DatacardNo != null && item.DatacardNo.Length > 0)
                        {
                            @item.DatacardNo
                        }
                        else
                        {
                             @:- - -
                        }
                        </td>
                    }
                    else
                    {
                        <td class="v-align-middle text-center">No</td>
                    }
                    
                    @if (@item.Multimeter == true)
                    {
                        <td class="v-align-middle text-center">Yes <br />
                        @if (item.MultimeterNo != null && item.MultimeterNo.Length > 0)
                        {
                            @item.MultimeterNo
                        }
                        else
                        {
                            @:- - -
                        }
                        </td>
                    }
                    else
                    {
                        <td class="v-align-middle text-center">No</td>
                    }

                    @if (@item.Toolkit == true)
                    {
                        <td class="v-align-middle text-center">Yes <br />
                        @if (item.ToolkitNo != null && item.ToolkitNo.Length > 0)
                        {
                            @item.ToolkitNo
                        }
                        else
                        {
                            @:- - - 
                        }
                        </td>
                    }
                    else
                    {
                        <td class="v-align-middle text-center">No</td>
                    }
                    @if (Session["AccountMgr"] != null)
                    {
                    <td class="v-align-middle text-center">
                        <a href="@Url.Action("UpdateAssetsAssigned", "Shared", new { flag = 2, id = (int?)item.Id })" class="update update-icon" data-toggle="tooltip" data-placement="top" title="Update">
                        <i class="fa fa-pencil-square-o"></i></a>
                    </td>
                    }
                    @*<td class="v-align-middle">
                        <a href="@Url.Action("AssetAssigned", "Shared", new { flag = 3, id = (int?)item.Id })" class="update update-icon" data-toggle="tooltip" data-placement="top" title="Delete">
                        <i class="fa fa-trash"></i></a>
                    </td>*@
                    <td></td>
                </tr>
            }
            </tbody>
        </table>
            if (Session["AccountMgr"] != null)
            {
        <div class="col-lg-12 col-md-12">
            <div id="myPager2" class="pull-right">
                @Html.PagedListPager(Model, page => Url.Action("EmployeeAssetsList", "Shared",
                new
                {
                    humanID = ViewBag.HumanID,
                    page = page,
                    sortOrder = ViewBag.CurrentSort,
                    currentFilter = ViewBag.CurrentFilter
                }
                ))
            </div>
        </div>
            }
    }
    else
    {
        <div class="col-lg-12 col-md-12 m-t-20 m-l-20 norecordsfound">
        <img src="~/Content/Images/norecordfound.jpg" alt="No Records Found" title="No Records Found">
        
        </div>
    }
    </div>
    </div>
</div>

<script type="text/javascript">

    $(document).ready(function () {

        $(".update").click(function (e) {
            e.preventDefault();

            var redirecturl = $(this).attr('href');
            //        alert(redirecturl);
            $("#AdminLoadingBg").fadeIn();
            $("#AdminLoadimg").show();
            $.ajax({
                url: redirecturl,
                contentType: 'application/html; charset=utf-8',
                type: 'GET',
                dataType: 'html'

            })
       .success(function (result) {
           $("#AdminLoadingBg").fadeOut();
           $("#AdminLoadimg").hide();
           $('#divPartial').show();
           $('#divPartial').html('');
           $('#divPartial').html(result);
       })
       .error(function (xhr, status) {
       });
   });


   $('#searchBtn').click(function (e) {
       e.preventDefault();
       // alert();
       if ($('#SearchString').val() != "") {
           $("#AdminLoadingBg").fadeIn();
           $("#AdminLoadimg").show();
           $.ajax({
               url: "/Shared/EmployeeAssetsList",
               type: 'GET',
               cache: false,
               data: { searchString: $('#SearchString').val() },

               success: function (result) {
                   $("#AdminLoadingBg").fadeOut();
                   $("#AdminLoadimg").hide();
                   $('#divPartial').html('');
                   $('#divPartial').empty();
                   $('#divPartial').html(result);
               }
           });
       }
       else {
           return;
       }
       return false;
   });


   $(function () {
       $('#myPager2').on('click', 'a', function (e) {
           e.preventDefault();
           if (this.href != "") {
               $("#AdminLoadingBg").fadeIn();
               $("#AdminLoadimg").show();

               $.ajax({
                   url: this.href,
                   type: 'GET',
                   cache: false,
                   success: function (result) {
                       $("#AdminLoadingBg").fadeOut();
                       $("#AdminLoadimg").hide();
                       $('#divPartial').html('');
                       $('#divPartial').empty();
                       $('#divPartial').html(result);
                   }
               });
           }
           return false;
       });
   });

    });

</script>